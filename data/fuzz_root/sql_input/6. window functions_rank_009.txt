CREATE TABLE t0 (c0 FLOAT, c1 VARCHAR(10), c2 INTEGER); INSERT INTO t0 (c0, c1, c2) VALUES (1.23, 'v0', 100), (4.56, 'v1', 200), (7.89, 'v0', 300), (10.11, 'v2', 400), (13.14, 'v0', 500); SELECT c0, c1, c2, RANK() OVER (PARTITION BY LENGTH(c1) ORDER BY c0 DESC, c2 ASC) AS rank_value FROM t0;