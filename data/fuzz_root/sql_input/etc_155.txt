CREATE TABLE t0 (i0 INTEGER, i1 INTEGER); INSERT INTO t0 (i0, i1) VALUES (5, 10); INSERT INTO t0 (i0, i1) VALUES (15, 20); INSERT INTO t0 (i0, i1) VALUES (25, 30); WITH cte_name AS (SELECT i0, i1 FROM t0 WHERE i0 > 10) SELECT i0, RANK() OVER (ORDER BY i0) FROM cte_name;