CREATE TABLE t0 (c0 FLOAT, c1 INTEGER, c2 TEXT); INSERT INTO t0 (c0, c1, c2) VALUES (0.001, 10, 'v0'), (0.002, 20, 'v1'), (0.003, 10, 'v2'), (0.004, 30, 'v3'); SELECT c0, c1, c2, ROW_NUMBER() OVER (PARTITION BY c1 ORDER BY c0 * 100 DESC, c2 ASC) AS rn FROM t0;