CREATE TABLE t0 (c0 TEXT, c1 INTEGER, c2 FLOAT); INSERT INTO t0 (c0, c1, c2) VALUES ('v0', 1, 0.1), ('v1', 2, 0.2), ('v2', 3, 0.3), ('v3', 4, 0.4); SELECT c0, c1, c2, ROW_NUMBER() OVER (PARTITION BY c1 % 2 ORDER BY c2 ASC, LENGTH(c0)) AS rn FROM t0;